{"version":3,"file":"sharebymail-vue-settings-admin-sharebymail.mjs","sources":["../apps/sharebymail/src/components/AdminSettings.vue","../apps/sharebymail/src/main-admin.js"],"sourcesContent":["<!--\n\t- @copyright 2022 Carl Schwan <carl@carlschwan.eu>\n\t-\n\t- @author Carl Schwan <carl@carlschwan.eu>\n\t-\n\t- @license GNU AGPL version 3 or any later version\n\t-\n\t- This program is free software: you can redistribute it and/or modify\n\t- it under the terms of the GNU Affero General Public License as\n\t- published by the Free Software Foundation, either version 3 of the\n\t- License, or (at your option) any later version.\n\t-\n\t- This program is distributed in the hope that it will be useful,\n\t- but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n\t- GNU Affero General Public License for more details.\n\t-\n\t- You should have received a copy of the GNU Affero General Public License\n\t- along with this program. If not, see <http://www.gnu.org/licenses/>.\n\t-\n-->\n\n<template>\n\t<NcSettingsSection :name=\"t('sharebymail', 'Share by mail')\"\n\t\t:description=\"t('sharebymail', 'Allows users to share a personalized link to a file or folder by putting in an email address.')\">\n\t\t<NcCheckboxRadioSwitch type=\"switch\"\n\t\t\t:checked.sync=\"sendPasswordMail\"\n\t\t\t@update:checked=\"update('sendpasswordmail', sendPasswordMail)\">\n\t\t\t{{ t('sharebymail', 'Send password by mail') }}\n\t\t</NcCheckboxRadioSwitch>\n\n\t\t<NcCheckboxRadioSwitch type=\"switch\"\n\t\t\t:checked.sync=\"replyToInitiator\"\n\t\t\t@update:checked=\"update('replyToInitiator', replyToInitiator)\">\n\t\t\t{{ t('sharebymail', 'Reply to initiator') }}\n\t\t</NcCheckboxRadioSwitch>\n\t</NcSettingsSection>\n</template>\n\n<script>\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.js'\nimport NcSettingsSection from '@nextcloud/vue/dist/Components/NcSettingsSection.js'\nimport { loadState } from '@nextcloud/initial-state'\nimport { showError } from '@nextcloud/dialogs'\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { confirmPassword } from '@nextcloud/password-confirmation'\nimport '@nextcloud/password-confirmation/dist/style.css'\n\nexport default {\n\tname: 'AdminSettings',\n\tcomponents: {\n\t\tNcCheckboxRadioSwitch,\n\t\tNcSettingsSection,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsendPasswordMail: loadState('sharebymail', 'sendPasswordMail'),\n\t\t\treplyToInitiator: loadState('sharebymail', 'replyToInitiator'),\n\t\t}\n\t},\n\tmethods: {\n\t\tasync update(key, value) {\n\t\t\tawait confirmPassword()\n\t\t\tconst url = generateOcsUrl('/apps/provisioning_api/api/v1/config/apps/{appId}/{key}', {\n\t\t\t\tappId: 'sharebymail',\n\t\t\t\tkey,\n\t\t\t})\n\t\t\tconst stringValue = value ? 'yes' : 'no'\n\t\t\ttry {\n\t\t\t\tconst { data } = await axios.post(url, {\n\t\t\t\t\tvalue: stringValue,\n\t\t\t\t})\n\t\t\t\tthis.handleResponse({\n\t\t\t\t\tstatus: data.ocs?.meta?.status,\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tthis.handleResponse({\n\t\t\t\t\terrorMessage: t('sharebymail', 'Unable to update share by mail config'),\n\t\t\t\t\terror: e,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync handleResponse({ status, errorMessage, error }) {\n\t\t\tif (status !== 'ok') {\n\t\t\t\tshowError(errorMessage)\n\t\t\t\tconsole.error(errorMessage, error)\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","/**\n * @copyright 2022 Carl Schwan <carl@carlschwan.eu>\n *\n * @author Carl Schwan <carl@carlschwan.eu>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport Vue from 'vue'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport AdminSettings from './components/AdminSettings.vue'\n\nVue.mixin({\n\tmethods: {\n\t\tt,\n\t},\n})\n\nconst AdminSettingsView = Vue.extend(AdminSettings)\nnew AdminSettingsView().$mount('#vue-admin-sharebymail')\n"],"names":["_sfc_main","NcCheckboxRadioSwitch","NcSettingsSection","loadState","key","value","confirmPassword","url","generateOcsUrl","stringValue","data","axios","e","status","errorMessage","error","showError","Vue","t","AdminSettingsView","AdminSettings"],"mappings":";mRAiDA,MAAAA,EAAA,CACA,KAAA,gBACA,WAAA,CACA,sBAAAC,EACA,kBAAAC,CACA,EACA,MAAA,CACA,MAAA,CACA,iBAAAC,EAAA,cAAA,kBAAA,EACA,iBAAAA,EAAA,cAAA,kBAAA,CACA,CACA,EACA,QAAA,CACA,MAAA,OAAAC,EAAAC,EAAA,SACA,MAAAC,EAAA,EACA,MAAAC,EAAAC,EAAA,0DAAA,CACA,MAAA,cACA,IAAAJ,CACA,CAAA,EACAK,EAAAJ,EAAA,MAAA,KACA,GAAA,CACA,KAAA,CAAA,KAAAK,CAAA,EAAA,MAAAC,EAAA,KAAAJ,EAAA,CACA,MAAAE,CACA,CAAA,EACA,KAAA,eAAA,CACA,QAAAC,GAAAA,EAAAA,EAAA,MAAAA,YAAAA,EAAA,OAAAA,YAAAA,EAAA,MACA,CAAA,CACA,OAAAE,EAAA,CACA,KAAA,eAAA,CACA,aAAA,EAAA,cAAA,uCAAA,EACA,MAAAA,CACA,CAAA,CACA,CACA,EACA,MAAA,eAAA,CAAA,OAAAC,EAAA,aAAAC,EAAA,MAAAC,CAAA,EAAA,CACAF,IAAA,OACAG,EAAAF,CAAA,EACA,QAAA,MAAAA,EAAAC,CAAA,EAEA,CACA,CACA,+0BC/DAE,EAAI,MAAM,CACT,QAAS,CACV,EAAEC,CACA,CACF,CAAC,EAED,MAAMC,EAAoBF,EAAI,OAAOG,CAAa,EAClD,IAAID,EAAiB,EAAG,OAAO,wBAAwB"}